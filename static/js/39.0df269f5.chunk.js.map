{"version":3,"sources":["redux/myDocuments/actions/myDocument.js","modules/uploadImageCompressed/UploadImageComp.jsx","redux/uploadImageComp/actions/uploadImageComp.js","modules/addDocuments/components/FormAddDocuments.jsx"],"names":["__webpack_require__","d","__webpack_exports__","getMyDocument","deleteDocument","redux_actions__WEBPACK_IMPORTED_MODULE_0__","_services_index__WEBPACK_IMPORTED_MODULE_2__","_redux_generic_actions_frontend__WEBPACK_IMPORTED_MODULE_3__","_redux_constants__WEBPACK_IMPORTED_MODULE_4__","error_my_document","data","createAction","constants","dispatch","getState","Promise","resolve","reject","show_loading","fireAjax","action","then","json","hide_loading","error","message","doc_id","id","async_deleteDocument","UploadImageComp","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","loading","handleSubmit","bind","assertThisInitialized","e","_this2","preventDefault","params","props","file","fileName","url","type","includes","setState","quality","qualityValue","ImageCompressor","compress","formData","FormData","key","append","delete","name","axios","post","notify","loggedUser","role","onFetchDevice","onFetchUnapprovedUser","onGetMyDocuments","catch","request","status","statusText","isRole","onUploadFile","_this3","react_default","a","createElement","CircularProgress_default","size","thickness","style","marginLeft","onSubmit","value","className","onClick","callUpdateDocuments","Component","connect","uploadImage","logged_user","userLogin","actionsManageDevice","uploadfile","payload","actionMyDocuments","FormAddDocument","_var_www_html_projects_ReactReduxHR_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_var_www_html_projects_ReactReduxHR_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_var_www_html_projects_ReactReduxHR_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","handleClose","open","handleOpen","document_type","token","user_id","match","userId","page_url","window","location","href","imageUrl","onIsAlreadyLogin","handleFileChange","_var_www_html_projects_ReactReduxHR_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","addEventListener","toggleCollapse","link1","refs","stop","getToken","Array","from","target","files","reader","FileReader","onloadend","result","readAsDataURL","actions","react__WEBPACK_IMPORTED_MODULE_6___default","material_ui_FlatButton__WEBPACK_IMPORTED_MODULE_17___default","label","primary","_components_generic_Menu__WEBPACK_IMPORTED_MODULE_9__","_components_generic_Header__WEBPACK_IMPORTED_MODULE_12__","pageTitle","showLoading","frontend","encType","ref","onChange","multiple","src","material_ui_Dialog__WEBPACK_IMPORTED_MODULE_16___default","modal","onRequestClose","autoScrollBodyContent","_uploadImageCompressed_UploadImageComp__WEBPACK_IMPORTED_MODULE_13__","CONFIG","upload_url","history","push","VisibleAddDocuments","toJS","usersList","requestUsersList","FormAddDocuments","withRouter"],"mappings":"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","file":"static/js/39.0df269f5.chunk.js","sourcesContent":["import {createAction} from 'redux-actions';\nimport {CONFIG} from '../../../config/index';\nimport {fireAjax} from '../../../services/index';\nimport {show_loading, hide_loading} from '../../../redux/generic/actions/frontend';\nimport * as constants from '../../../redux/constants';\n\n// ---------get user document\n\nexport function success_my_document (data) {\n  return createAction(constants.ACTION_SUCCESS_MY_DOCUMENT)(data);\n}\nexport function error_my_document (data) {\n  return createAction(constants.ACTION_ERROR_MY_DOCUMENT)(data);\n}\n\nfunction async_getMyDocument () {\n  return fireAjax('POST', '', {\n    'action': 'get_user_document'\n  });\n}\n\nexport function getMyDocument () {\n  return function (dispatch, getState) {\n    return new Promise((resolve, reject) => {\n      dispatch(show_loading());\n      async_getMyDocument().then(\n\n\t\t\t(json) => {\n  dispatch(hide_loading());\n  if (json.error === 0) {\n    dispatch(success_my_document(json.data));\n\t\t\t\t\t// resolve('disabled')\n  } else {\n    dispatch(error_my_document(json.data.message));\n\t\t\t\t\t// reject('response with Error')\n  }\n},\n\t\t\t(error) => {\n  dispatch(hide_loading()); // hide loading icon\n  dispatch(error_my_document('error occurs!!!'));\n\t\t\t\t// reject('error occurs!!')\n}\n\t\t\t);\n    });\n  };\n}\n// ------Delete user document\nfunction async_deleteDocument (doc_id) {\n  return fireAjax('POST', '', {\n    'action': 'delete_user_document',\n    'id':     doc_id\n  });\n}\n\nexport function deleteDocument (doc_id) {\n  return function (dispatch, getState) {\n    return new Promise((resolve, reject) => {\n      dispatch(show_loading());\n      async_deleteDocument(doc_id).then(\n        (json) => {\n          dispatch(hide_loading());\n          if (json.error === 0) {\n            resolve(json.data.message);\n          } else {\n            reject(json.data.message);\n          }\n        },\n        (error) => {\n          dispatch(hide_loading()); // hide loading icon\n          reject('error occurs!!');\n        }\n\t\t\t);\n    });\n  };\n}\n","import React, { Component } from \"react\";\nimport ImageCompressor from \"image-compressor.js\";\nimport { notify } from \"../../services/notify\";\nimport { connect } from \"react-redux\";\nimport { qualityValue } from \"../../helper/helper\";\nimport axios from \"axios\";\nimport CircularProgress from \"material-ui/CircularProgress\";\nimport * as actionsManageDevice from \"../../redux/inventory/actions/inventory\";\nimport * as actionsUploadFile from \"../../redux/uploadImageComp/actions/uploadImageComp\";\nimport * as actionMyDocuments from \"../../redux/myDocuments/actions/myDocument\";\nimport { format } from \"url\";\nclass UploadImageComp extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const { params } = this.props;\n    const file = this.props.file;\n    const fileName = this.props.fileName; //the name must be same as in backend\n    const url = this.props.url;\n\n    if (!file) {\n      return;\n    } else if (!file.type.includes(\"image\")) {\n      const formData = new FormData();\n      let isRole = this.props.loggedUser.data.role;\n\n      for (let key in params) {\n        formData.append(key, params[key]);\n      }\n      formData.delete('imageUrl');\n      formData.append(fileName, file);\n      formData.append(\"submit\", \"Upload\");\n\n      this.props.onUploadFile(formData, url,isRole);\n    } else {\n      this.setState({ loading: true });\n      let quality = qualityValue(file);\n      let imageCompressor = new ImageCompressor();\n      imageCompressor\n        .compress(file, {\n          quality: quality\n        })\n        .then(file => {\n          const formData = new FormData();\n          for (let key in params) {\n            formData.append(key, params[key]);\n          }\n          formData.delete('imageUrl'); //IMPORTANT: it is the image in ImagePreview  \n          formData.append(fileName, file, file.name);\n          formData.append(\"submit\", \"Upload\");\n          // Send the compressed image file to server with XMLHttpRequest.\n          // this.props.uploadFile(formData, url);\n          axios\n            .post(url, formData)\n            .then(data => {\n              notify(\"Success !\", `File uploaded successfully`, \"success\");\n              this.setState({ loading: false });\n              if (\n                this.props.loggedUser.data.role === \"Admin\"\n              ) {\n                this.props.onFetchDevice();\n                this.props.onFetchUnapprovedUser();\n                this.props.onGetMyDocuments();\n              }\n              else if(this.props.loggedUser.data.role === \"HR\"\n            ){\n              return;\n              // this.props.onFetchDevice();\n            }\n            else{\n              this.props.onGetMyDocuments();\n            }\n            })\n            .catch(error => {\n              if (error.request.status === 413) {\n                notify(\"Error\", \"File too large to upload\", \"error\");\n                this.setState({ loading: false });\n              }\n              else{\n                notify(\"Error\", error.request.statusText, \"error\");\n                this.setState({ loading: false });\n              }\n            });\n        });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.loading || this.state.loading ? (\n          <CircularProgress\n            size={30}\n            thickness={3}\n            style={{ marginLeft: \"50%\" }}\n          />\n        ) : (\n          <form onSubmit={this.handleSubmit}>\n            <input\n              type=\"submit\"\n              name=\"submit\"\n              value=\"Upload\"\n              className=\"col-xs-12 md-btn md-raised indigo\"\n              onClick={e => this.props.callUpdateDocuments(e)}\n            />\n          </form>\n        )}\n      </div>\n    );\n  }\n}\nconst mapStateToProps = state => ({\n  loading: state.uploadImage.loading,\n  loggedUser: state.logged_user.userLogin\n});\nconst mapDispatchToProps = dispatch => {\n  return {\n    onFetchDevice: () => {\n      return dispatch(actionsManageDevice.get_machines_detail());\n    },\n    onUploadFile: () => {\n      return dispatch(actionsUploadFile.uploadFile());\n    },\n    onFetchUnapprovedUser: () => {\n      return dispatch(actionsManageDevice.unapprovedUser());\n    },\n    onGetMyDocuments: () => {\n      return dispatch(actionMyDocuments.getMyDocument());\n    }\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadImageComp);\n","import { createAction } from \"redux-actions\";\nimport { uploadfile } from \"../../../services/index\";\nimport { notify } from \"../../../services/notify\";\nimport { show_loading, hide_loading } from \"../../../redux/generic/actions/frontend\";\nimport * as actionsManageDevice from \"../../../redux/inventory/actions/inventory\";\nimport * as actionMyDocuments from \"../../../redux/myDocuments/actions/myDocument\";\n\nexport const uploadFile = (formData, url, isRole) => dispatch => {\n  dispatch({ type: \"UPLOADING_FILE\" });\n  uploadfile(formData, url).then(data => {\n    dispatch({ type: \"UPLOAD_FILE\", payload: data });\n    notify(\"Success !\", `File uploaded successfully`, \"success\");\n    if (isRole === \"Admin\") {\n      dispatch(actionsManageDevice.get_machines_detail());\n      dispatch(actionsManageDevice.unapprovedUser());\n      dispatch(actionMyDocuments.getMyDocument());\n    } else if (isRole === \"HR\") {\n      return;\n    } else {\n      dispatch(actionMyDocuments.getMyDocument());\n    }\n  }).catch(error => {\n    dispatch({ type: \"UPLOAD_FILE\", payload: false });\n    notify('Error',error,'error')\n  });\n};\n","import React, { Component } from \"react\";\nimport { CONFIG } from \"../../../config/index\";\nimport { notify } from \"../../../services/notify\";\nimport Menu from \"../../../components/generic/Menu\";\nimport { getToken } from \"../../../services/generic\";\nimport * as actions from \"../../../redux/actions\";\nimport Header from \"../../../components/generic/Header\";\nimport UploadImageComp from \"../../uploadImageCompressed/UploadImageComp\";\nimport { browserHistory } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport Dialog from \"material-ui/Dialog\";\nimport FlatButton from \"material-ui/FlatButton\";\n\nclass FormAddDocument extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      document_type: \"\",\n      token: \"\",\n      file: [],\n      user_id: this.props.match.params.userId,\n      page_url: window.location.href,\n      imageUrl:\"\"\n    };\n    this.props.onIsAlreadyLogin();\n\n    this.handleFileChange = this.handleFileChange.bind(this);\n    this.callUpdateDocuments = this.callUpdateDocuments.bind(this);\n  }\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.toggleCollapse);\n  }\n\n  callUpdateDocuments(e) {\n    let type = this.state.document_type;\n    let link1 = this.refs.file.value;\n    let file = this.state.file[0];\n    let userId = this.props.match.params.userId;\n    let stop = false;\n    if (!userId) {\n      stop = true;\n      notify(\"Warning!\", \"Please select a User.\", \"warning\");\n    } else if (type === \"\") {\n      stop = true;\n      notify(\"Warning!\", \"Please select document type.\", \"warning\");\n    } else if (link1 === \"\") {\n      stop = true;\n      notify(\"Warning!\", \"Please select a file\", \"warning\");\n    }\n\n    if (stop) {\n      e.preventDefault();\n    }\n  }\n  componentWillMount(props) {\n    this.setState({\n      token: getToken()\n    });\n  }\n  handleFileChange(e) {\n    this.setState({ file: Array.from(e.target.files) });\n    const file = this.refs.file.files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      this.setState({\n        imageUrl: reader.result\n      });\n    };\n    if (file) {\n      reader.readAsDataURL(file);\n      this.setState({\n        imageUrl: reader.result\n      });\n    } else {\n      this.setState({\n        imageUrl: \"\"\n      });\n    }\n  }\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n  handleOpen = () => {\n    this.setState({open:true});\n  }\n  render() {\n    const actions = [\n      <FlatButton label=\"Close\" primary={true} onClick={this.handleClose} />\n    ];\n    return <div>\n        <Menu {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={\"Add Documents\"} showLoading={this.props.frontend.show_loading} />\n          <br />\n          <br />\n          <div className=\"row p-t-md\">\n            <div className=\"col-sm-offset-3 col-sm-6 p-x-md\">\n              <h6 id=\"uploadMyDoc\" className=\"text-center pointer\">\n                Upload Documents\n              </h6>\n              <div className=\"row box p-a-md m-b-lg \" id=\"uploadDoc\">\n                <form encType=\"multipart/form-data\">\n                  <div className=\"form-group\">\n                    <label className=\"col-sm-12\">Document Type</label>\n                    <select className=\"form-control\" ref=\"document_type\" \n                      onChange={() => {\n                        this.setState({\n                          document_type: this.refs.document_type.value,\n                          file: []\n                        });\n                        this.refs.file.value = \"\";\n                      }} \n                      value={this.state.document_type}>\n                      <option value=\"\">--- Select Doc Type ---</option>\n                      <option value=\"CV\">CV</option>\n                      <option value=\"PAN Card\">PAN Card</option>\n                      <option value=\"Address Proof\">Address Proof</option>\n                      <option value=\"Photo\">Photo</option>\n                      <option value=\"Offer Letter\">Offer Letter</option>\n                      <option value=\"Appointment Letter\">\n                        Appointment Letter\n                      </option>\n                      <option value=\"Previous Company Experience Letter\">\n                        Previous Company Experience Letter\n                      </option>\n                      <option value=\"Previous Company Offer Letter\">\n                        Previous Company Offer Letter\n                      </option>\n                      <option value=\"Previous Company Salary Slip\">\n                        Previous Company Salary Slip\n                      </option>\n                      <option value=\"Previous Company Other Documents\">\n                        Previous Company Other Documents\n                      </option>\n                      <option value=\"Qualification Certificate\">\n                        Qualification Certificate\n                      </option>\n                      <option value=\"Other Documents\">\n                        Other Documents\n                      </option>\n                    </select>\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label className=\"col-sm-12\">Attachment </label>\n                    <input type=\"file\" className=\"form-control\" ref=\"file\" name=\"link_1\" multiple=\"multiple\" onChange={this.handleFileChange} />\n                  </div>\n                  <div className=\"form-group\">\n                    {this.state.file[0] ? <div>\n                        <label className=\"col-xs-12\">Image Preview </label>\n                        <img src={this.state.imageUrl} onClick={() => {\n                            this.handleOpen();\n                          }} className=\"small\" />\n                        <br />\n                      </div> : null}\n                    <Dialog actions={actions} modal={false} open={this.state.open} onRequestClose={this.handleClose} autoScrollBodyContent={true}>\n                      <div className=\"thumbnail\">\n                        <img src={this.state.imageUrl} />\n                      </div>\n                    </Dialog>\n                  </div>\n                  <div className=\"form-group col-sm-12\">\n                    <UploadImageComp callUpdateDocuments={this.callUpdateDocuments} url={CONFIG.upload_url} params={this.state} file={this.state.file[0]} fileName=\"link_1\" />\n                  </div>\n                </form>\n              </div>\n              <button className=\"col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 md-btn md-raised indigo\" onClick={() => {\n                  this.props.history.push(\"manage_users\");\n                }}>\n                {\" \"}\n                Go to Employee Page\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>;\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    usersList: state.usersList.toJS()\n  };\n}\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIsAlreadyLogin: () => {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    requestUsersList: () => {\n      return dispatch(actions.requestUsersList());\n    }\n  };\n};\nconst VisibleAddDocuments = connect(mapStateToProps, mapDispatchToProps)(\n  FormAddDocument\n);\n\nconst FormAddDocuments = withRouter(VisibleAddDocuments);\n\nexport default FormAddDocuments;\n"],"sourceRoot":""}